
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>How to deploy a change to mybinder.org? &#8212; Site Reliability Guide for mybinder.org 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What does a MyBinder.org deployment do?" href="what.html" />
    <link rel="prev" title="Pre-requisite technologies" href="prereqs.html" />

   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

<!-- Add JupyterHub styling -->
<link rel="stylesheet" href="../_static/jupyter.css" type="text/css" />
<link rel="shortcut icon" href="../_static/favicon.ico"/>


  </head><body>
<div class="rightsidebar">
    <h3>On this page</h3>
    <ul>
<li><a class="reference internal" href="#">How to deploy a change to mybinder.org?</a><ul>
<li><a class="reference internal" href="#deployment-policy">Deployment policy</a></li>
<li><a class="reference internal" href="#updating-binderhub">Updating BinderHub</a></li>
<li><a class="reference internal" href="#updating-repo2docker">Updating repo2docker</a></li>
<li><a class="reference internal" href="#deploying-a-change">Deploying a change</a><ul>
<li><a class="reference internal" href="#deploying-to-both-staging-then-prod">Deploying to <em>both</em> <code class="docutils literal notranslate"><span class="pre">staging</span></code> then <code class="docutils literal notranslate"><span class="pre">prod</span></code></a></li>
<li><a class="reference internal" href="#deploying-to-only-staging">Deploying to <em>only</em> <code class="docutils literal notranslate"><span class="pre">staging</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#changing-the-mybinder-org-infrastructure">Changing the mybinder.org infrastructure</a></li>
</ul>
</li>
</ul>

</div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
   <div class='prev-next-top'>
     
      <a class='left-prev' href="prereqs.html" title="previous chapter">Previous</a>
      <a class='right-next' href="what.html" title="next chapter">Next</a>
   <div style='clear:both;'></div>
 
   </div>


          <div class="body" role="main">
            
  <div class="section" id="how-to-deploy-a-change-to-mybinder-org">
<span id="how-to-deploy-a-change-to-mybinder-org"></span><h1>How to deploy a change to mybinder.org?<a class="headerlink" href="#how-to-deploy-a-change-to-mybinder-org" title="Permalink to this headline">¶</a></h1>
<p>This document explains <strong>how</strong> to deploy a change to mybinder.org.
For information on what exactly a deployment does, see <a class="reference external" href="deployment/what.html">what</a>.</p>
<p>When a new change has landed in either <a class="reference external" href="https://github.com/jupyterhub/binderhub">BinderHub</a>
or <a class="reference external" href="https://github.com/jupyter/repo2docker">repo2docker</a>, they need to be explicitly
deployed to mybinder.org for users to benefit from them. This is the most common kind of
change deployed to mybinder.org.</p>
<p>The first two sections of this page cover how to upgrade either <code class="docutils literal notranslate"><span class="pre">repo2docker</span></code> or
<code class="docutils literal notranslate"><span class="pre">BinderHub</span></code>.</p>
<div class="section" id="deployment-policy">
<span id="deployment-policy"></span><h2>Deployment policy<a class="headerlink" href="#deployment-policy" title="Permalink to this headline">¶</a></h2>
<p>Deployments to mybinder.org should be:</p>
<ol class="simple">
<li><p><strong>Safe</strong>. We will have good, user friendly tooling + lots of safeguards,
so people can deploy without fear of accidentally breaking the site.</p></li>
<li><p><strong>Straightforward</strong>. We want a lot of people to be involved in maintaining mybinder.org,
so we must make sure deployments are also easy to do. Most deployments should
not require specific sysadmin knowledge.</p></li>
<li><p><strong>Timely</strong>. We deploy changes to repo2docker and BinderHub within a few days of
them being merged into master.</p></li>
</ol>
<p>These are all <strong>aspirational</strong> - we strive for hitting the above points,
but recognize that work and life may get in the way of doing this perfectly.</p>
</div>
<div class="section" id="updating-binderhub">
<span id="updating-binderhub"></span><h2>Updating BinderHub<a class="headerlink" href="#updating-binderhub" title="Permalink to this headline">¶</a></h2>
<p>This section explains how to upgrade the mybinder.org deployment after
merging a PR in the BinderHub repo.</p>
<p>BinderHub is deployed via a helm chart that is tied to a particular commit on the
BinderHub repository. BinderHub is a “requirement” for this mybinder.org deployment,
which is why it is specified in <code class="docutils literal notranslate"><span class="pre">mybinder/requirements.yaml</span></code>. Upgrading the version of BinderHub
that is used in mybinder.org corresponds to updating the BinderHub helm chart version,
which we step through below.</p>
<ol>
<li><p>Merge changes to BinderHub.</p></li>
<li><p>Open the <a class="reference external" href="https://travis-ci.org/jupyterhub/binderhub/branches">branches page for the BinderHub travis account</a>.</p></li>
<li><p>Wait for the build for your PR merge to pass (it will say “#NNN passed”).
If it does, then continue to step 4. If it doesn’t, take a look at the error message, and debug as needed
until they pass.</p></li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">list_new_commits.py</span></code> script in the <code class="docutils literal notranslate"><span class="pre">scripts/</span></code> of the
<code class="docutils literal notranslate"><span class="pre">mybinder.org-deploy</span></code> repository. It will output something like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---------------------</span>

<span class="n">BinderHub</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jupyterhub</span><span class="o">/</span><span class="n">binderhub</span><span class="o">/</span><span class="n">compare</span><span class="o">/&lt;</span><span class="n">OLD</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;...&lt;</span><span class="n">NEW</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="n">repo2docker</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jupyter</span><span class="o">/</span><span class="n">repo2docker</span><span class="o">/</span><span class="n">compare</span><span class="o">/&lt;</span><span class="n">OLD</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;...&lt;</span><span class="n">NEW</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="n">JupyterHub</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jupyterhub</span><span class="o">/</span><span class="n">zero</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">jupyterhub</span><span class="o">-</span><span class="n">k8s</span><span class="o">/</span><span class="n">compare</span><span class="o">/&lt;</span><span class="n">OLD</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;...&lt;</span><span class="n">NEW</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;</span>

<span class="o">---------------------</span>
</pre></div>
</div>
<p>Since you are updating BinderHub, copy the text in <code class="docutils literal notranslate"><span class="pre">&lt;NEW-HASH&gt;</span></code> for the
line that refers to BinderHub. This is the name of the new BinderHub image.
We’ll now update the config to refer to this image.</p>
</li>
<li><p>In your fork of the <a class="reference external" href="https://github.com/jupyterhub/mybinder.org-deploy">mybinder.org-deploy</a>
repository, open <code class="docutils literal notranslate"><span class="pre">mybinder/requirements.yaml</span></code>.</p></li>
<li><p>Toward the end of the file, you will see lines similar to:</p>
<ul class="simple">
<li><p>name: binderhub
version: 0.1.0-9692255
repository: https://jupyterhub.github.io/helm-chart</p></li>
</ul>
<p>Where <code class="docutils literal notranslate"><span class="pre">9692255</span></code> is the same value printed in <code class="docutils literal notranslate"><span class="pre">&lt;OLD-HASH&gt;</span></code> above.</p>
<p>Replace this hash with the text in <code class="docutils literal notranslate"><span class="pre">&lt;NEW-HASH&gt;</span></code> above. For example, in the
above case, we’ll replace it with the new hash.</p>
<ul class="simple">
<li><p>name: binderhub
version: 0.1.0-fbf6e5a
repository: https://jupyterhub.github.io/helm-chart</p></li>
</ul>
</li>
<li><p>Merge this change to <code class="docutils literal notranslate"><span class="pre">mybinder/requirements.yaml</span></code> into the mybinder.org-deploy
repository following the steps in the <a class="reference external" href="#deploying-a-change">Deploying a change</a> section
to deploy the change.</p></li>
</ol>
</div>
<div class="section" id="updating-repo2docker">
<span id="updating-repo2docker"></span><h2>Updating repo2docker<a class="headerlink" href="#updating-repo2docker" title="Permalink to this headline">¶</a></h2>
<p>This section explains how to upgrade the mybinder.org deployment after
merging a PR in the <a class="reference external" href="https://github.com/jupyterhub/repo2docker">repo2docker</a> repo.</p>
<p>BinderHub uses a docker image with repo2docker in it. When a new commit is merged in
the repo2docker repository, a new version of this image is pushed. We then configure
BinderHub to use the newly built image (which is identified by a tag) by editing <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code>.
The following lines describe how to point mybinder.org to the new repo2docker image</p>
<ol>
<li><p>Merge changes to repo2docker.</p></li>
<li><p>Open the <a class="reference external" href="https://travis-ci.org/jupyter/repo2docker/branches">branches page for repo2docker</a>.
And click on the number for the latest build on “Master”.</p></li>
<li><p>Wait for the build for your PR merge to pass (it will say “#NNN passed”).
If it does, then continue to step 4. If it doesn’t, take a look at the error message, and debug as needed
until they pass.</p></li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">list_new_commits.py</span></code> script in the <code class="docutils literal notranslate"><span class="pre">scripts/</span></code> of the
<code class="docutils literal notranslate"><span class="pre">mybinder.org-deploy</span></code> repository. It will output something like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---------------------</span>

<span class="n">BinderHub</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jupyterhub</span><span class="o">/</span><span class="n">binderhub</span><span class="o">/</span><span class="n">compare</span><span class="o">/&lt;</span><span class="n">OLD</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;...&lt;</span><span class="n">NEW</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="n">repo2docker</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jupyter</span><span class="o">/</span><span class="n">repo2docker</span><span class="o">/</span><span class="n">compare</span><span class="o">/&lt;</span><span class="n">OLD</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;...&lt;</span><span class="n">NEW</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="n">JupyterHub</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jupyterhub</span><span class="o">/</span><span class="n">zero</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">jupyterhub</span><span class="o">-</span><span class="n">k8s</span><span class="o">/</span><span class="n">compare</span><span class="o">/&lt;</span><span class="n">OLD</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;...&lt;</span><span class="n">NEW</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;</span>

<span class="o">---------------------</span>
</pre></div>
</div>
<p>Since you are updating repo2docker, copy the text in <code class="docutils literal notranslate"><span class="pre">&lt;NEW-HASH&gt;</span></code> for the
line that refers to repo2docker. This is the name of the new repo2docker image.
We’ll now update the config to refer to this image.</p>
</li>
<li><p>In your fork of the mybinder.org-deploy repository, open
<code class="docutils literal notranslate"><span class="pre">mybinder/values.yaml</span></code>.</p></li>
<li><p>Somewhere in the file you will see <code class="docutils literal notranslate"><span class="pre">repo2dockerImage</span></code>, it will look like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BinderHub</span><span class="p">:</span>
  <span class="n">build_image</span><span class="p">:</span> <span class="n">jupyter</span><span class="o">/</span><span class="n">repo2docker</span><span class="p">:</span><span class="mi">65</span><span class="n">d5411</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">65d5411</span></code> is the same value in <code class="docutils literal notranslate"><span class="pre">&lt;OLD-HASH&gt;</span></code> above.</p>
</li>
<li><p>Replace the <em>old</em> hash that is there with what you copied in step 4.
For example, the edited file will look similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BinderHub</span><span class="p">:</span>
  <span class="n">build_image</span><span class="p">:</span> <span class="n">jupyter</span><span class="o">/</span><span class="n">repo2docker</span><span class="p">:</span><span class="o">&lt;</span><span class="n">NEW</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>Merge this change to <code class="docutils literal notranslate"><span class="pre">mybinder/values.yaml</span></code> into the mybinder.org-deploy
repository following the steps in the <a class="reference external" href="#deploying-a-change">Deploying a change</a> section
to deploy the change.</p></li>
</ol>
</div>
<div class="section" id="deploying-a-change">
<span id="deploying-a-change"></span><h2>Deploying a change<a class="headerlink" href="#deploying-a-change" title="Permalink to this headline">¶</a></h2>
<div class="section" id="deploying-to-both-staging-then-prod">
<span id="deploying-to-both-staging-then-prod"></span><h3>Deploying to <em>both</em> <code class="docutils literal notranslate"><span class="pre">staging</span></code> then <code class="docutils literal notranslate"><span class="pre">prod</span></code><a class="headerlink" href="#deploying-to-both-staging-then-prod" title="Permalink to this headline">¶</a></h3>
<p>Deploying a change involves making a PR with your desired change and merging it to
master.</p>
<ol>
<li><p>Make the changes as described above <a class="reference external" href="https://github.com/jupyterhub/mybinder.org-deploy">on your fork of this repo</a>.</p></li>
<li><p>Keep track of the <strong>hashes</strong> that were updated. You should have both the <em>old</em> hash that
was replaced, and the <em>new</em> hash that replaced it.</p></li>
<li><p>If you haven’t already, run the <code class="docutils literal notranslate"><span class="pre">list_new_commits.py</span></code> script in the <code class="docutils literal notranslate"><span class="pre">scripts/</span></code>
folder. This will print out a URL that describes the changes made to both
BinderHub and repo2docker.</p></li>
<li><p>Make a PR to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch with the changes you want.</p>
<ul>
<li><p>Name the PR like so: <code class="docutils literal notranslate"><span class="pre">&lt;TOOL-CHANGED&gt;:</span> <span class="pre">&lt;OLD-HASH&gt;...&lt;NEW-HASH&gt;</span></code></p></li>
<li><p>In the description of the PR, paste the full URL that you printed out
<code class="docutils literal notranslate"><span class="pre">list_new_commits.py</span></code>. It should have the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jupyterhub</span><span class="o">/&lt;</span><span class="n">REPO</span><span class="o">-</span><span class="n">NAME</span><span class="o">&gt;/</span><span class="n">compare</span><span class="o">/&lt;</span><span class="n">OLD</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;...&lt;</span><span class="n">NEW</span><span class="o">-</span><span class="n">HASH</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Review, accept, and merge this PR. This will make Travis deploy the changes
to <a class="reference external" href="https://staging.mybinder.org">staging.mybinder.org</a>, and run tests in the <code class="docutils literal notranslate"><span class="pre">tests/</span></code>
directory against it. <strong>In this case, you can merge your own PR</strong>. Note that if the
PR is a large change to the Kubernetes setup, this may take some time, and Travis may
time-out in the process. If this happens and you <em>expect</em> it to happen, you can restart
travis a few times.</p></li>
<li><p>If the tests succeed, the change will be deployed to mybinder.org.</p></li>
<li><p>If the tests fail, the change will <em>not</em> be deployed to mybinder.org.
You must then investigate why it failed. <strong>If you can
not figure out a cause in about 10 minutes, revert the change.</strong>
You can revert the change with <a class="reference external" href="https://help.github.com/articles/reverting-a-pull-request/">the GitHub UI</a> and immediately
merge the reversion PR that GitHub creates.</p></li>
<li><p>Troubleshoot and make changes to your fork. Repeat the process from Step 1.</p></li>
</ol>
</div>
<div class="section" id="deploying-to-only-staging">
<span id="deploying-to-only-staging"></span><h3>Deploying to <em>only</em> <code class="docutils literal notranslate"><span class="pre">staging</span></code><a class="headerlink" href="#deploying-to-only-staging" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently you cannot deploy changes to <cite>mybinder/requirements.yaml</cite> only to staging.</p>
</div>
<p>Sometimes you want to test out a deployment live before you make a deployment
to <code class="docutils literal notranslate"><span class="pre">prod</span></code>. This is possible by editing <code class="docutils literal notranslate"><span class="pre">staging</span></code>-only config files. To deploy
to staging only, follow these steps:</p>
<ol class="simple">
<li><p>Make changes to <a class="reference external" href="https://github.com/jupyterhub/mybinder.org-deploy/blob/master/config/staging.yaml"><code class="docutils literal notranslate"><span class="pre">config/staging.yaml</span></code></a>
on your fork. This file contains configuration for Helm that will <strong>override</strong>
whatever is in <code class="docutils literal notranslate"><span class="pre">mybinder/values.yaml</span></code>.</p></li>
<li><p>Make a PR to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch, and review, accept, and merge this PR.
<strong>In this case, you can merge your own PR</strong>.
This will make Travis deploy the changes
to <a class="reference external" href="https://staging.mybinder.org">staging.mybinder.org</a>, and run tests in the <code class="docutils literal notranslate"><span class="pre">tests/</span></code>
directory against it. Because we’ve only edited <code class="docutils literal notranslate"><span class="pre">staging.yaml</span></code>, <strong>it will not
be deployed to <code class="docutils literal notranslate"><span class="pre">prod</span></code></strong>.</p></li>
<li><p>If the tests succeed, you can check out the new behavior at <code class="docutils literal notranslate"><span class="pre">staging.mybinder.org</span></code>.</p></li>
<li><p>If the tests fail, the deployer must investigate why it failed. <strong>If they can
not figure out a cause in about 10 minutes, revert the change.</strong>
The build should not remain broken for more than ten minutes.</p></li>
<li><p>Troubleshoot and make changes to your fork. Repeat the process from Step 1.</p></li>
<li><p>If you are satisfied with these changes, <strong>revert</strong> the change to <code class="docutils literal notranslate"><span class="pre">config/staging.yaml</span></code>,
and <strong>apply</strong> those same changes to <code class="docutils literal notranslate"><span class="pre">mybinder/values.yaml</span></code>. Now follow the
steps in the section above to deploy to <strong>both</strong> <code class="docutils literal notranslate"><span class="pre">staging</span></code> and <code class="docutils literal notranslate"><span class="pre">prod</span></code>.</p></li>
</ol>
<p>The <a class="reference external" href="deployment/what.html">what</a> document has more details on common ways deployments can go
wrong, and how to debug them.</p>
</div>
</div>
<div class="section" id="changing-the-mybinder-org-infrastructure">
<span id="changing-the-mybinder-org-infrastructure"></span><h2>Changing the mybinder.org infrastructure<a class="headerlink" href="#changing-the-mybinder-org-infrastructure" title="Permalink to this headline">¶</a></h2>
<p>Sometimes we need to make changes to the mybinder.org core infrastructure.
These are changes to the infrastructure that don’t directly touch binderhub or
repo2docker, and often require more expertise. Examples for these include:</p>
<ol class="simple">
<li><p>Upgrading nginx Ingress controller</p></li>
<li><p>Re-configuring our prometheus servers</p></li>
<li><p>Upgrading to a new JupyterHub release</p></li>
<li><p>Re-configuring autoscaling for the cluster</p></li>
<li><p>Doing a kubernetes master upgrade.</p></li>
</ol>
<p>These changes require a different kind of review than deploying code. In this
case, ensure that you have a fellow member of the mybinder.org operations
team to assist in case something goes wrong.</p>
</div>
</div>


          </div>
   <div class='prev-next-bottom'>
     
      <a class='left-prev' href="prereqs.html" title="previous chapter">Pre-requisite technologies</a>
      <a class='right-next' href="what.html" title="next chapter">What does a MyBinder.org deployment do?</a>
   <div style='clear:both;'></div>
 
   </div>

        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <p class="logo"><a href="../index.html">
    <img class="logo" src="../_static/logo.jpg" alt="Logo"/>
  </a></p>
<h1 class="logo"><a href="../index.html">Site Reliability Guide for mybinder.org</a></h1>



<p class="blurb">A Site Reliability Guide for mybinder.org deployment</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=jupyterhub&repo=binderhub&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<h3>Table of Contents</h3>
<p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started with the <code class="docutils literal notranslate"><span class="pre">mybinder.org</span></code> dev team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../production_environment.html">Production environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../terminology.html">Terminology for the deployment</a></li>
</ul>
<p class="caption"><span class="caption-text">Deployment</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="prereqs.html">Pre-requisite technologies</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to deploy a change to mybinder.org?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#deployment-policy">Deployment policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-binderhub">Updating BinderHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-repo2docker">Updating repo2docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploying-a-change">Deploying a change</a></li>
<li class="toctree-l2"><a class="reference internal" href="#changing-the-mybinder-org-infrastructure">Changing the mybinder.org infrastructure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="what.html">What does a MyBinder.org deployment do?</a></li>
</ul>
<p class="caption"><span class="caption-text">Operation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../common_problems.html">Common problems and their solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_snippets.html">Command snippets used during operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grafana_plots.html">Some useful Grafana plots</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../components/metrics.html">Metrics collection with Prometheus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/dashboards.html">Operational Dashboards with Grafana</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/ingress.html">HTTPS ingress with nginx + kube-lego</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/cloud.html">Cloud products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/matomo.html">Matomo (formerly Piwik) analytics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../analytics/events-archive.html">The Analytics Events Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analytics/cloud-costs.html">Cloud Costs Data</a></li>
</ul>
<p class="caption"><span class="caption-text">Incidents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2019-04-03-ingress-cordoned.html">2019-04-03, 30min outage during node pool upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2019-03-24-r2d-upgrade.html">2019-03-24, repo2docker upgrade and docker image cache wipe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2019-02-20-no-logs.html">incident date: 2019-02-20, kubectl logs unavailable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-07-30-jupyterlab-build-cpu-saturate.html">2018-07-30 JupyterLab builds saturate BinderHub CPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-07-08-podsnips-aplenty.html">2018-07-08, too many pods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-04-18-cull-flood.html">2018-04-18, Culler flood</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-03-31-server-start-fail.html">2018-03-31, Server launch failures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-03-26-no-space-left.html">2018-03-26, “no space left on device”</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-03-13-PVC-hub-locked.html">2018-03-13, PVC for hub is locked</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-02-22-nginx-down.html">2018-02-22 NGINX crash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-02-20-jupyterlab-announcement.html">2018-02-20, JupyterLab Announcement swamps Binder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-02-12-launch-fail.html">2018-02-12, Hub Launch Fail</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-01-18-reddit-hug.html">2018-01-18, reddit hugs mybinder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-01-18-ssl-outdated.html">2018-01-11, Warning from letsencrypt about outdated SSL certificate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-01-17-ubuntu-upgrade.html">2018-01-17, Emergency Aardvark bump</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2018-01-04-failed-staging-deploy.html">2018-01-04, Failed deploy to staging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2017-11-30-oom-proxy.html">2017-11-30 4:23PM PST, OOM (Out of Memory) Proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2017-10-17-cluster-full.html">2017-10-17, Cluster Full</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2017-09-29-504.html">2017-09-29, 504</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/2017-09-27-hub-403.html">2017-09-27, Hub 403</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/template-incident-report.html">Template for reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incident-reports/template-incident-report.html#incident-date-yyyy-mm-dd-incident-name">{{ incident date: yyyy-mm-dd }}, {{ incident name }}</a></li>
</ul>


<div class="relations">
<h3>Navigation</h3>
<ul>
  <li><a href="../index.html">Documentation Home</a><ul>
  <li><a href="prereqs.html" title="Previous">Previous topic</a></li>
  <li><a href="what.html" title="Next">Next topic</a></li>
  </ul>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/deployment/how.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
        <form class="search" action="../search.html" method="get">
            <input type="text" name="q" placeholder="Quick Search" aria-labelledby="searchlabel" />
            <input type="submit" value="Go" />
        </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017 - 2019, Binder Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/deployment/how.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>